(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4275d91a"],{2762:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%",height:"100%"}},[e("div",{attrs:{id:"pano"}}),e("div",{staticClass:"divbottom"},[e("div",[t._v("h:"),e("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.h,callback:function(e){t.h=e},expression:"h"}})],1),e("div",[t._v("v:"),e("Input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.v,callback:function(e){t.v=e},expression:"v"}})],1),e("Button",{attrs:{type:"primary"},on:{click:t.handleConfirmText}},[t._v("创建热点")]),e("Button",{on:{click:function(e){t.visible=!0}}},[t._v("换算方法")])],1),e("Modal",{attrs:{title:"换算方法","footer-hide":""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",[t._v("screentosphere(x,y, h,v)")]),e("div",[t._v("spheretoscreen(h,v, x,y, stereoside*)")]),e("div",[t._v(" 将球面空间坐标与屏幕坐标相互之间转换. screentosphere球面坐标转换 x/y 到 h/v 反之， spheretoscreen 转换 h/v 到 x/y . ")]),e("div",[t._v("参数:")]),e("div",[t._v("•x / y")]),e("div",[t._v("◦屏幕左上角为定位参考的x/y坐标.")]),e("div",[t._v("•h / v")]),e("div",[t._v("◦球面空间角度坐标，与热点坐标形式一致 (360x180).")]),e("div",[t._v(" •stereoside (可选) For stereo rendering - 定义应该映射哪个屏幕侧的坐标，left、right、bottom、top. ")]),e("div",[t._v("Notes: •x,y,h,v 必须是变量名称，不能直接用变量值或数值! •变量不存在则创建.")]),e("div",[t._v("样例： screentosphere(mouse.x, mouse.y, toh, tov);")])])],1)},i=[],n=s("4ec3"),r=s("90fe"),a={name:"VPano",data(){return{tourId:"",sceneId:"",scene:{},krpano:null,readyStatus:!1,visible:!1,v:0,h:0}},created(){const t=window.location.href;this.tourId=Object(r["a"])(t,"tourId"),this.sceneId=Object(r["a"])(t,"sceneId")},mounted(){this.getInfo()},methods:{getInfo(){const t=this.tourId?n["c"]:n["b"];t({tourId:this.tourId}).then(t=>{if(t.IsSuccess&&t.SuccessReturn){this.scene=t.SuccessReturn;const i=t.SuccessReturn,n=Object(r["b"])();if(i.ShareEndDate&&n>i.ShareEndDate)this.showError({msg:"链接失效",data:"来晚了，当前场景的分享时间已到期"});else{document.title=i.Name?"全景漫游-"+i.Name:"全景漫游";var e=document.createElement("meta"),s="description",o=i.Description?i.Description:window.location.href;e.setAttribute("name",s),e.setAttribute("content",o),document.head.appendChild(e),this.initKrpano(this.scene.TourXml)}}else this.showError({msg:"错误",data:t.ErrorMessage})}).catch(t=>{this.showError(t.response.data)})},initKrpano(t){const e={target:"pano",xml:t,html5:"auto",mobilescale:1,showerrors:"false",passQueryParameters:!0,onready:this.ready};embedpano(e)},ready(){this.krpano=document.getElementById("krpanoSWFObject")},handleConfirmText(){let t="spot_video_"+(new Date).getTime();const e="h:"+this.h+",v:"+this.v;this.krpano.call("addhotspot("+t+");"),this.krpano.get("hotspot["+t+"]").loadstyle("video1"),this.krpano.set("hotspot["+t+"].ath",this.h),this.krpano.set("hotspot["+t+"].atv",this.v),this.krpano.set("hotspot["+t+"].text",e)}}},c=a,d=(s("dd87"),s("2877")),h=Object(d["a"])(c,o,i,!1,null,"2c45683f",null);e["default"]=h.exports},"6a43":function(t,e,s){},dd87:function(t,e,s){"use strict";s("6a43")}}]);